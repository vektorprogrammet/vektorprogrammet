{# The table containing applications which are assiged to an interviewer but not interviewed #}
<table width="100%" id="application-table">

    <thead>
    <tr>
        {# data-sort is used to sort the tables with stupidtable.js #}
        <th data-sort="string">Fornavn</th>
        <th data-sort="string">Etternavn</th>
        <th data-sort="int">Tlf</th>
        <th data-sort="string">E-post</th>
        <th data-sort="int">Oppsatt dato</th>
        <th data-sort="string">Oppsatt rom</th>
        <th data-sort="string">Intervjues av</th>
        <th data-sort="string">Status</th>
        {# Add header columns to match the buttons added #}
        <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    {% for a in applicants %}
        <tr>
            <td><a href="{{ path('specific_profile', {id: a.user.id}) }}">{{ a.user.firstName }}</a></td>
            <td>{{ a.user.lastName }}</td>
            <td>{{ a.user.phone }}</td>
            <td>{{ a.user.email }}</td>

            {% if a.interview.scheduled is not null %}
                <td data-sort-value="{{ a.interview.scheduled.getTimestamp }}">
                    {{ a.interview.scheduled|date("d.m.y - G:i") }}
                </td>
            {% else %}
                <td data-sort-value="0"></td>
            {% endif %}


            <td>{{ a.interview.room }}</td>
            <td>{{ a.interview.interviewer }}</td>

            <td style="color: {{ a.interview.getInterviewStatusAsColor() }}">
                {{ a.interview.getInterviewStatusAsString() }}
            </td>

            {# Add the buttons to book(send email) and conduct an interview, given the correct permissions #}
            {% if is_granted_team_leader() or a.interview.isInterviewer(app.user) %}
                <td>
                    <a href="{{ path('interview_schedule', { 'id': a.id }) }}" class="button tiny"><i
                                class="fa fa-envelope"></i> Sett opp</a>
                </td>
                <td>
                    <a href="{{ path('interview_conduct', { 'id': a.id }) }}" class="button tiny {{ a.interview.isDraft ? 'warning' }}"><i
                                class="fa fa-list-ul"></i> {{ a.interview.isDraft ? 'Kladd' : 'Intervju' }}</a>
                </td>
                <td>
                    <button data-reveal-id="adbc" class="button tiny">
                        Endre status
                    </button>

                    <div id="adbc" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
                        <h3 id="modalTitle">Endre status</h3>
                        {{ form_start(form) }}
                        {{ form_widget(form) }}
                        {{ form_end(form) }}
                        <a class="close-reveal-modal" aria-label="Close">&#215;</a>
                    </div>
                </td>
            {% else %}
                <td colspan="3"></td>
            {% endif %}
        </tr>
    {% endfor %}
    </tbody>

</table>
